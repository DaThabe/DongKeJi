<state:StateView
    x:Class="DongKeJi.Launcher.UI.View.Color.ColorView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:DongKeJi.Launcher.UI.View.Color"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:state="clr-namespace:DongKeJi.UI.Control.State;assembly=DongKeJi"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    mc:Ignorable="d">

    <Grid>

        <Grid.RowDefinitions>

            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />

        </Grid.RowDefinitions>

        <ui:CardControl DockPanel.Dock="Top">

            <ui:CardControl.Header>

                <ui:TextBox
                    Margin="0,0,0,5"
                    DockPanel.Dock="Left"
                    KeyDown="InputKeyDown"
                    PlaceholderText="搜索颜色..." />

            </ui:CardControl.Header>

            <ui:CardControl.Content>

                <ui:Button
                    Appearance="Primary"
                    Click="ThemeButtonClick"
                    Content="切换主题" />

            </ui:CardControl.Content>
        </ui:CardControl>


        <ui:ListView
            Grid.Row="1"
            d:ItemsSource="{d:SampleData}"
            ItemsSource="{Binding SystemColors, RelativeSource={RelativeSource AncestorType={x:Type local:ColorView}}, Mode=TwoWay}"
            SelectedItem="{Binding SelectedSystemColor, RelativeSource={RelativeSource AncestorType={x:Type local:ColorView}}, Mode=TwoWay}"
            Style="{StaticResource ListViewHorizontalScrollBarStyle}">

            <ui:ListView.ItemTemplate>
                <DataTemplate DataType="{x:Type local:ColorItem}">

                    <Button
                        Width="200"
                        Margin="3"
                        Padding="5"
                        HorizontalAlignment="Stretch"
                        Background="{DynamicResource ControlFillColorDefaultBrush}"
                        Click="CopyColorClick"
                        Tag="{Binding Key}">

                        <DockPanel>

                            <Border
                                Width="180"
                                Height="30"
                                HorizontalAlignment="Stretch"
                                d:Background="#000"
                                Background="{Binding Brush}"
                                CornerRadius="5"
                                DockPanel.Dock="Top" />

                            <ui:TextBlock
                                Margin="0,5,0,0"
                                Background="Transparent"
                                FontSize="10"
                                Text="{Binding Key}"
                                TextAlignment="Center" />

                        </DockPanel>

                    </Button>

                </DataTemplate>
            </ui:ListView.ItemTemplate>

            <ui:ListView.ItemsPanel>
                <ItemsPanelTemplate>
                    <ui:VirtualizingWrapPanel />
                </ItemsPanelTemplate>
            </ui:ListView.ItemsPanel>

            <ui:ListView.Template>
                <ControlTemplate>

                    <ScrollViewer
                        x:Name="ScrollViewer"
                        HorizontalScrollBarVisibility="Disabled"
                        VerticalScrollBarVisibility="Auto">
                        <ItemsPresenter />
                    </ScrollViewer>

                    <ControlTemplate.Triggers>

                        <!--  鼠标进入  -->
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="ScrollViewer" Property="VerticalScrollBarVisibility" Value="Auto" />
                        </Trigger>

                        <!--  鼠标离开  -->
                        <Trigger Property="IsMouseOver" Value="False">
                            <Setter TargetName="ScrollViewer" Property="VerticalScrollBarVisibility" Value="Hidden" />
                        </Trigger>

                    </ControlTemplate.Triggers>

                </ControlTemplate>
            </ui:ListView.Template>

        </ui:ListView>


    </Grid>
</state:StateView>