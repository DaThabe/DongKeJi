<Application
    x:Class="DongKeJi.Launcher.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    DispatcherUnhandledException="OnDispatcherUnhandledException">

    <Application.Resources>

        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ui:ThemesDictionary Theme="Light" />
                <ui:ControlsDictionary />
            </ResourceDictionary.MergedDictionaries>

            <!--  优化ItemsControl性能  -->
            <Style TargetType="ItemsControl">

                <Setter Property="ItemsPanel">
                    <Setter.Value>
                        <ItemsPanelTemplate>

                            <VirtualizingStackPanel VirtualizationMode="Recycling" />

                        </ItemsPanelTemplate>
                    </Setter.Value>
                </Setter>

                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate>

                            <ScrollViewer x:Name="ScrollViewer">
                                <ItemsPresenter />
                            </ScrollViewer>

                            <ControlTemplate.Triggers>

                                <!--  鼠标进入  -->
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="ScrollViewer" Property="VerticalScrollBarVisibility" Value="Visible" />
                                </Trigger>

                                <!--  鼠标离开  -->
                                <Trigger Property="IsMouseOver" Value="False">
                                    <Setter TargetName="ScrollViewer" Property="VerticalScrollBarVisibility" Value="Hidden" />
                                </Trigger>

                            </ControlTemplate.Triggers>

                        </ControlTemplate>
                    </Setter.Value>
                </Setter>

            </Style>

            <!--  优化ListView性能  -->
            <Style TargetType="ui:ListView">

                <Setter Property="ItemsPanel">
                    <Setter.Value>
                        <ItemsPanelTemplate>

                            <VirtualizingStackPanel VirtualizationMode="Recycling" />

                        </ItemsPanelTemplate>
                    </Setter.Value>
                </Setter>

                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate>

                            <ScrollViewer x:Name="ScrollViewer">
                                <ItemsPresenter />
                            </ScrollViewer>

                            <ControlTemplate.Triggers>

                                <!--  鼠标进入  -->
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="ScrollViewer" Property="VerticalScrollBarVisibility" Value="Visible" />
                                </Trigger>

                                <!--  鼠标离开  -->
                                <Trigger Property="IsMouseOver" Value="False">
                                    <Setter TargetName="ScrollViewer" Property="VerticalScrollBarVisibility" Value="Hidden" />
                                </Trigger>

                            </ControlTemplate.Triggers>

                        </ControlTemplate>

                    </Setter.Value>
                </Setter>

            </Style>

            <!--  优化ToggleButton样式  -->
            <Style TargetType="ToggleButton">

                <Setter Property="Background" Value="{DynamicResource CardBackground}" />
                <Setter Property="Height" Value="60" />

                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ToggleButton">

                            <Border
                                Margin="{TemplateBinding Margin}"
                                HorizontalAlignment="Stretch"
                                VerticalAlignment="Stretch"
                                Background="{TemplateBinding Background}"
                                CornerRadius="5">

                                <StackPanel VerticalAlignment="Center" Orientation="Horizontal">

                                    <Border
                                        x:Name="AccentLine"
                                        Width="3"
                                        Height="20"
                                        Margin="0,3,10,3"
                                        Background="{DynamicResource AccentFillColorDefaultBrush}"
                                        CornerRadius="3"
                                        DockPanel.Dock="Left" />

                                    <ContentPresenter />

                                </StackPanel>
                            </Border>

                            <ControlTemplate.Triggers>

                                <!--  鼠标进入  -->
                                <Trigger Property="IsChecked" Value="True">
                                    <Setter TargetName="AccentLine" Property="Visibility" Value="Visible" />
                                </Trigger>

                                <!--  鼠标离开  -->
                                <Trigger Property="IsChecked" Value="False">
                                    <Setter TargetName="AccentLine" Property="Visibility" Value="Hidden" />
                                </Trigger>

                            </ControlTemplate.Triggers>

                        </ControlTemplate>

                    </Setter.Value>
                </Setter>

            </Style>


        </ResourceDictionary>

    </Application.Resources>

</Application>